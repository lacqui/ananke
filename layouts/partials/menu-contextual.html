{{/*
  Use Hugo's native Table of contents feature. You must set `toc: true` in your parameters for this to show.
  https://gohugo.io/content-management/toc/
*/}}

{{- if .Params.toc -}}
  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">{{ i18n "whatsInThis" . }}</p>
      {{ .TableOfContents }}
  </div>
{{- end -}}

{{/*
  Use Hugo's native related content feature to pull in content that may have similar parameters, like tags. etc.
  https://gohugo.io/content-management/related/
*/}}

{{ $related := .Site.RegularPages.Related . | first 15 }}

{{ with $related }}
  <div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
    <p class="f5 b mb3">{{ i18n "related" }}</p>
    <ul class="pa0 list">
	   {{ range . }}
	     <li  class="mb2">
          <a href="{{ .RelPermalink }}">
            {{- .Title -}}
          </a>
        </li>
	    {{ end }}
    </ul>
</div>
{{ end }}

<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
  <a href='https://ko-fi.com/U7U8FR97' target='_blank'><img height='36' style='border:0px;height:36px;'
      src='https://az743702.vo.msecnd.net/cdn/kofi2.png?v=0' border='0' alt='Buy Me a Coffee at ko-fi.com' /></a>
</div>

{{ $featured_image := partial "func/GetFeaturedImage.html" . }}
{{ if $featured_image }}
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
  <p>Image credit:</p>
  <figure>
    {{ if .Params.image_orig }}
      <a href="{{ .Params.image_orig }}">
    {{ end }}
    {{ $image := $featured_image.Resize "200x" }}
      <img src="{{ $image.RelPermalink }}" width="{{ $image.Width }}" height="{{ $image.Height }}" class="db"
        alt="Image for {{ .Params.image_title }}">
    {{- if .Params.image_orig}}</a>{{- end -}}
    <figcaption>
      <p><a href="{{ .Params.image_orig}}">{{ .Params.image_title}}</a> by {{ .Params.image_credit}}</p>
    </figcaption>
  </figure>
</div>
{{ end }}